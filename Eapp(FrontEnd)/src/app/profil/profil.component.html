<!-- profil.componant.html-->
<div class="container" style="margin-left: 200px" *ngIf="isUserAuthenticated()">
  <h2>Edit Profile</h2>
  <form [formGroup]="profileForm" (ngSubmit)="updateProfile()">
    <div class="form-group">
      <label for="nom">Nom:</label>
      <input type="text" class="form-control" id="nom" formControlName="nom">
      <div *ngIf="profileForm.get('nom')?.invalid && profileForm.get('nom')?.touched" class="text-danger">
        Nom is required.
      </div>
    </div>
    <div class="form-group">
      <label for="prenom">Prenom:</label>
      <input type="text" class="form-control" id="prenom" formControlName="prenom">
      <div *ngIf="profileForm.get('prenom')?.invalid && profileForm.get('prenom')?.touched" class="text-danger">
        Prenom is required.
      </div>
    </div>
    <div class="form-group">
      <label for="age">Age:</label>
      <input type="number" class="form-control" id="age" formControlName="age">
      <div *ngIf="profileForm.get('age')?.invalid && profileForm.get('age')?.touched" class="text-danger">
        Age is required.
      </div>
    </div>
    <div class="form-group">
      <label for="email">Email:</label>
      <input type="email" class="form-control" id="email" formControlName="email">
      <div *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched" class="text-danger">
        Valid email is required.
      </div>
    </div>
    <div class="form-group">
      <label for="password">Password:</label>
      <input type="password" class="form-control" id="password" [readonly]="!showConfirmPassword" formControlName="password" [type]="showPassword ? 'text' : 'password'">
      <span class="eye-icon" (click)="togglePasswordVisibility()">
    {{ showPassword ? '👁️' : '👁️‍🗨️' }}
      </span>
    </div>
    <div class="form-group">
      <label for="passwordCon" *ngIf="showConfirmPassword">Confirm Password:</label>
      <input type="password" class="form-control" id="passwordCon" formControlName="passwordCon" *ngIf="showConfirmPassword">
      <div *ngIf="(showConfirmPassword&&!passwordsMatch && profileForm.get('passwordCon')?.touched)||(showConfirmPassword&&!profileForm.get('passwordCon')?.touched)" class="text-danger">
        Passwords do not match.
      </div>
    </div>
    <button type="button" class="btn btn-secondary" (click)="changePassword()">Update Password</button>
    <button type="submit" class="btn btn-primary" [disabled]="!profileForm.valid || !passwordsMatch || isAnyFieldEmpty() || !hasChanges">Update Profile</button>
    <button type="button" class="btn btn-danger" style="margin-left: 90px" (click)="deleteAccount()">Delete Account</button>

  </form>
</div>
<div class="test"  *ngIf="!isUserAuthenticated()">
  <h1> ERROR 404 :</h1>
  <h1 >User is not Logged-In</h1>
  <h1 >Try Logging-In and come back</h1>
  <p class="mouad">mouad</p>
</div>

